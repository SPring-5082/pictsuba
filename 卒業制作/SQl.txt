CREATE TABLE CUSTOMERS(
	CUSTOMER_ID INT AUTO_INCREMENT PRIMARY KEY,
	NAME VARCHAR(32) NOT NULL,
	PASSWORD VARCHAR(16) NOT NULL,
	PHONE VARCHAR(16) UNIQUE,
	MAIL VARCHAR(32) NOT NULL UNIQUE,
	AGE INT NOT NULL CHECK(AGE >= 0),
	BIRTH_DAY DATE,
	GENDER VARCHAR(8),
	POINT INT NOT NULL CHECK(POINT >= 0) DEFAULT 0,
	FIRST_LOG DATE NOT NULL,
	FIN_LOG DATE NOT NULL,
	CHECK(FIRST_LOG <= FIN_LOG)
);

CREATE TABLE ADDRESS(
	ADDRESS_ID INT AUTO_INCREMENT PRIMARY KEY,
	CUSTOMER_ID INT REFERENCES CUSTOMERS(CUSTOMER_ID),
	ZIP_CODE VARCHAR(8) NOT NULL CHECK( LENGTH(ZIP_CODE) = 7 OR LENGTH(ZIP_CODE) = 8 ),
	PREF VARCHAR(8) NOT NULL,
	MUNICIPALITIES VARCHAR(32) NOT NULL,
	STREET VARCHAR(32) NOT NULL,
	BUILDING VARCHAR(64) 
);

CREATE TABLE CREDIT_CARDS(
	CARD_ID INT AUTO_INCREMENT  PRIMARY KEY,
	CUSTOMER_ID INT NOT NULL REFERENCES CUSTOMERS(CUSTOMER_ID),
	NUMBER VARCHAR(16) NOT NULL,
	EXPIRE VARCHAR(8) NOT NULL,
	SECURITY_CODE INT NOT NULL,
	OWNER_NAME VARCHAR(32) NOT NULL
);

ALTER TABLE CUSTOMERS ADD (ADDRESS_ID INT REFERENCES ADDRESS(ADDRESS_ID));
ALTER TABLE CUSTOMERS ADD (CARD_ID INT REFERENCES CREDIT_CARDS(CARD_ID));



